<link rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
      integrity="sha384-o/2yZuJZWGJ4s/adjxVW71R+EO/LyCwdQfP5UWSgX/w87iiTXuvDZaejd3TsN7mf"
      crossorigin="anonymous">

<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
        integrity="sha384-okbbMvvx/qfQkmiQKfd5VifbKZ/W8p1qIsWvE1ROPUfHWsDcC8/BnHohF7vPg2T6"
        crossorigin="anonymous"></script>

<div id="map" style="height: 600px; width: 800px"></div>

<script>
var map = L.map('map', { center: [52.5051, 13.4334], zoom: 13 });

L.tileLayer(
    'https://tile.openstreetmap.org/{z}/{x}/{y}.png',
    {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);


fetch('/wp-content/uploads/2023/04/projects.json')
    .then(response => response.json())
    .then(jsonObj => {
        console.log("data: " + jsonObj.data)
        jsonObj.data.forEach( project => {
            const geoJson = JSON.parse(project.geojson);
            console.log("geoJson: " + geoJson);
            console.log("type", geoJson.type)
            var polygon = L.geoJSON(geoJson).addTo(map);
            polygon.bindPopup("<h3>"+project.title+"</h3><p>" + project.Hintergrund + "</p>");
        });
    })
</script>
